import{r as h,j as e,X as p}from"./vendor-react-ti7DexHh.js";import{u as d}from"./index-DB_YrYSX.js";function v(){const{transferProgress:a,settings:n}=d();if(!a)return null;const{fileName:t,progress:x,status:s,error:u,speedMbps:l,etaSeconds:c,targetPath:o}=a,f=()=>{switch(s){case"uploading":return"bg-blue-500";case"completed":return"bg-green-500";case"error":return"bg-red-500";default:return"bg-gray-500"}},m=()=>{switch(s){case"uploading":return`正在上传: ${t}`;case"completed":return`上传完成: ${t}`;case"error":return`上传失败: ${u||"未知错误"}`;default:return""}};return h.useEffect(()=>{if(s==="completed"&&n.notifications){const r="传输完成",i=`上传完成: ${t}`;typeof Notification<"u"&&(Notification.permission==="granted"?new Notification(r,{body:i}):Notification.permission!=="denied"&&Notification.requestPermission().then(g=>{g==="granted"&&new Notification(r,{body:i})}))}},[s,n.notifications,t]),e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-96 shadow-xl",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4 electron-drag",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"文件传输"}),s!=="uploading"&&e.jsx("button",{onClick:()=>{const{setTransferProgress:r,setTransferring:i}=d.getState();r(null),i(!1)},className:"p-1 hover:bg-gray-100 rounded electron-no-drag",children:e.jsx(p,{className:"w-5 h-5 text-gray-500"})})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("p",{className:"text-sm text-gray-600",children:m()}),s==="uploading"&&e.jsxs("div",{className:"text-xs text-gray-500",children:["速度: ",l?`${l.toFixed(2)} MB/s`:"-"," · 剩余: ",c?`${Math.ceil(c)}s`:"-"]}),s==="uploading"&&e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:`h-2 rounded-full transition-all duration-300 ${f()}`,style:{width:`${x}%`}})}),s==="completed"&&e.jsxs("div",{className:"flex items-center space-x-2 text-green-600",children:[e.jsx("div",{className:"w-5 h-5 bg-green-500 rounded-full flex items-center justify-center",children:e.jsx("svg",{className:"w-3 h-3 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})}),e.jsx("span",{className:"text-sm font-medium",children:"传输成功"}),o&&e.jsxs("span",{className:"text-xs text-gray-600",children:["保存: ",o]})]}),s==="error"&&e.jsxs("div",{className:"flex items-center space-x-2 text-red-600",children:[e.jsx("div",{className:"w-5 h-5 bg-red-500 rounded-full flex items-center justify-center",children:e.jsx("svg",{className:"w-3 h-3 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})}),e.jsx("span",{className:"text-sm font-medium",children:"传输失败"})]})]})]})})}export{v as TransferProgress};
